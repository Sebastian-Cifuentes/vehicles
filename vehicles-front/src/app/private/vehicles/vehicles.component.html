@if(loading) {
    <b>Cargando... </b>
} @else {
    <p-toast />
    <p class="text-4xl text-center">Tabla de vehículos</p>
    <div class="card">
        <div class="flex justify-content-between">
            <div class="mb-4">
                <p-button [routerLink]="'/vehicles-form'" label="Agregar nuevo vehículo" />
            </div>
            <div class="mb-4">
                <p-button (click)="logout()" label="Cerrar sesión" />
            </div>
        </div>
        @if (vehicles.length > 0) {
            <p-table
                [value]="vehicles"
                [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th scope="col" pSortableColumn="plate" >
                            Placa <p-sortIcon field="date_birthday" />
                        <th scope="col" pSortableColumn="type" >
                            Tipo de vehículo <p-sortIcon field="email" />
                        <th scope="col" pSortableColumn="model" >
                            Modelo del vehículo <p-sortIcon field="addres" />
                        <th scope="col" pSortableColumn="model" >
                            Marca del vehículo <p-sortIcon field="addres" />
                        <th scope="col" pSortableColumn="name_owner" >
                            Nombre del propietario <p-sortIcon field="name" />
                        <th scope="col" pSortableColumn="email_owner" >
                            Email del propietario <p-sortIcon field="last_name" />
                        <th scope="col" pSortableColumn="number_owner" >
                            Número del propietario <p-sortIcon field="sex" />
                        <th scope="col"></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-vehicle>
                    <tr>
                        <td>{{ vehicle.plate }}</td>
                        <td>{{ vehicle.type }}</td>
                        <td>{{ vehicle.model }}</td>
                        <td>{{ vehicle.brand }}</td>
                        <td>{{ vehicle.name_owner }}</td>
                        <td>{{ vehicle.email_owner }}</td>
                        <td>{{ vehicle.number_owner }}</td>
                        <td>
                            <div class="inline-flex">
                                <p-button [routerLink]="'/vehicles-form/' + vehicle.id" class="mr-2" icon="pi pi-pen-to-square" />
                                <p-button [id]="'delete_' + vehicle.id" (click)="deleteVehicle(vehicle.id)" severity="danger" icon="pi pi-trash" />
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        } @else {
            <p>No hay información de vehículos</p>
        }
    </div>
}
